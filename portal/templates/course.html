{% extends "admin_base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/fixes.html" as fixes %}

{% block title %}
智友文化 - 课程管理
{% endblock %}

{% block content %}
<div class='container'>
	<div class="panel panel-default">
	  	<div class="panel-heading">
	  		<a class='custom_index' href="/index"></a>
	  		<span class='custom_title' align='center'>课程管理</span>
  		</div>

	  	<div class="panel-body">
		  	<div class="col-lg-4">
			      <input id='search_course_name' type="text" class="form-control" placeholder="课程名称"></input>
		  	</div>
		  	<div class="col-lg-2" align='center'>
		  	  	<button id='search_course' class="btn btn-default full" type="button" onclick='search_course()'>查找</button>
		  	</div>
		  	<div class="col-lg-4" align='center'>
		  	</div>
		  	<div class="col-lg-2" align='center'>
		    	<a href='/create_course'><button input='button' class='btn btn-primary full'>新增课程</button></a>
		  	</div>
		</div>
	</div>

	<br/><br/>
	<table class="table table-striped table-bordered table-hover">
		<tr class='info' align="center">
			<td>ID</td>
			<td>名称</td>
			<td>授课讲师</td>
			<td>开始时间</td>
			<td>结束时间</td>
			<td>授课次数</td>
			<td>报名费</td>
			<td>当前状态</td>
			<td>课程介绍</td>
			<td>其他</td>
			<td width="140px"></td>
		</tr>
		{% for course in pagination.items %}
		<tr align="center">
			<td>{{course.cid}}</td>
			<td>{{course.name}}</td>
			<td>{{teachers[loop.index - 1]}}</td>
			<td>{{course.start}}</td>
			<td>{{course.end}}</td>
			<td>{{course.count}}</td>
			<td>￥{{course.charge}}</td>
			<td>{{status[loop.index - 1]}}</td>
			<td>{{course.desc}}</td>
			<td>{{course.extend}}</td>
			<td>
				{% if course.status == 1 or course.status == 3 %}
				<a href="javascript:void(0)">报名</a>
				{% else %}
				<a href="/register_course?cid={{course.cid}}&&username={{user.username}}">报名</a>
				{% endif %}
				&nbsp;&nbsp;<a href="/update_course?cid={{course.cid}}">编辑</a>
			</td>
		</tr>
		{% endfor %}
	</table>

	{% if pagination.pages > 1 %}
    <nav align='center'>
        <ul class='pagination'>
            {% if pagination.has_prev %}
            <li><a href="/course?page={{pagination.prev_num}}"><span aria-hidden="true">上一页</span></a></li>
            {% else %}
            <li class='disabled'><span aria-hidden="true">上一页</span></li>
            {% endif %}
            <li class='active'><span aria-hidden="true">{{pagination.page}}/{{pagination.pages}}</span></li>
            {% if pagination.has_next %}
            <li><a href="/course?page={{pagination.next_num}}"><span aria-hidden="true">下一页</span></a></li>
            {% else %}
            <li class='disabled'><span aria-hidden="true">下一页</span></li>
            {% endif %}
      	</ul>
    </nav>
    {% endif %}
</div>

<script src="/static/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

<script src="/static/js/custom_common.js"></script>
<script src="/static/js/index.js"></script>

<script type="text/javascript">
	function search_course() {
		var name = document.getElementById("search_course_name");
		window.location.href = "/search_course?name=" + name.value;
	}
</script>
{% endblock %}

{% block head %}
{{super()}}
{{fixes.ie8()}}
{% endblock %}